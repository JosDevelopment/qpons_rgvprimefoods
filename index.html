<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>RGV Prime Foods</title>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            /* Rojo marca (usar 100/200 para CTAs y acentos) */
            primary: {
              50:"#F8E9EA",
              100:"#B0272A",  /* CTA rojo */
              200:"#D33B3E",
              300:"#A32025",
              400:"#82151A",
              500:"#6A0F14",
              600:"#4A0A0D",
              700:"#2E0707",
              800:"#150304",
              900:"#000000",
              950:"#000000",
            },
            /* Taupe/Leather (cuchillos/cuero) */
            accent: {
              50:"#F2EDE6",
              100:"#E3DACE",
              200:"#D2C5B4",
              300:"#C0AF98",
              400:"#AD987E",
              500:"#9A856C",
              600:"#87745F",
              700:"#736252",
              800:"#615343",
              900:"#4F4437",
              950:"#3E352C",
            },
            /* Neutros cálidos (fondo blanco + carbón) */
            neutral: {
              50:"#FFFFFF",
              100:"#F5F4F3",
              200:"#E7E5E2",
              300:"#D2CEC9",
              400:"#A9A39B",
              500:"#7C756C",
              600:"#4C4843",
              700:"#322F2B",
              800:"#1F1C1A",
              900:"#141211",
              950:"#0B0A09",
            },
          },
        },
      },
    };
  </script>

  <style>
    :root{
      /* (Si quieres, alínealas a tu paleta; por ahora se mantienen) */
      --color-primary-50:#fb3131; --color-primary-100:#fa0909; --color-primary-200:#d60404; --color-primary-300:#ae0404; --color-primary-400:#900303; --color-primary-500:#770202; --color-primary-600:#5e0202; --color-primary-700:#360101; --color-primary-800:#0e0000; --color-primary-900:#000000;
      --color-accent-100:#c2b8aa; --color-accent-200:#b6a999; --color-accent-300:#a99a87; --color-accent-400:#9c8b75; --color-accent-500:#8d7c65; --color-accent-600:#7b6c58;
      --color-neutral-50:#f3f3f3; --color-neutral-100:#d4d4d4; --color-neutral-200:#aeaeae; --color-neutral-300:#888888; --color-neutral-400:#626262; --color-neutral-600:#222222;

      --bg-page:#ffffff;
      --bg-header:rgba(255,255,255,0.85);
      --bg-section:#ffffff;
      --bg-card:#ffffff;
      --bg-muted:var(--color-neutral-50);
    }

    :root{ scroll-behavior:smooth; }

    .input{
      margin-top:.25rem;width:100%;border-radius:.75rem;border:1px solid var(--color-neutral-200);
      background:var(--bg-card);padding:.5rem .75rem;color:#111;outline:none;
    }
    .input::placeholder{color:var(--color-neutral-400);opacity:1}
    .input:focus{border-color:var(--color-primary-200)}

    dialog.lightbox{width:100%;height:100%;padding:0;border:0;background:rgba(0,0,0,.85)}
    dialog.lightbox::backdrop{background:rgba(0,0,0,.5)}
    .lb-btn{position:absolute;top:50%;transform:translateY(-50%);padding:.5rem .75rem;border-radius:.5rem;border:1px solid rgba(255,255,255,.25);color:#fff;background:rgba(20,21,24,.35);cursor:pointer}
    .lb-prev{left:1rem}.lb-next{right:1rem}
    .lb-close{position:absolute;top:1rem;right:1rem;z-index:60;padding:.4rem .6rem;border-radius:.5rem;border:1px solid rgba(255,255,255,.25);color:#fff;background:rgba(20,21,24,.35);cursor:pointer}
    .thumbs::-webkit-scrollbar{height:6px}.thumbs::-webkit-scrollbar-thumb{background:#fff;border-radius:4px}
  </style>
</head>

<body class="min-h-screen text-neutral-900 bg-[var(--bg-page)]">
  <!-- ============= HEADER ============= -->
  <header class="sticky top-0 z-50 backdrop-blur bg-[var(--bg-header)] border-b border-neutral-200">
    <div class="mx-auto flex max-w-7xl items-center justify-between px-4 py-4">
      <a href="#" class="flex items-center gap-3">
        <span id="brandLogoHeader" class="shrink-0 inline-flex" aria-hidden="true"></span>
        <span id="brandName" class="text-lg font-semibold tracking-wide"></span>
      </a>

      <nav id="navDesktop" class="hidden md:flex gap-6"></nav>

      <div class="hidden md:block">
        <a id="ctaDesktop" href="#" class="rounded-xl bg-primary-100 px-4 py-2 text-white font-semibold hover:opacity-90"></a>
      </div>

      <button id="menuBtn" aria-label="Abrir menú" class="md:hidden relative h-5 w-6">
        <span id="b1" class="absolute left-0 top-1 block h-0.5 w-6 bg-neutral-900 transition"></span>
        <span id="b2" class="absolute left-0 top-2.5 block h-0.5 w-6 bg-neutral-900 transition"></span>
        <span id="b3" class="absolute left-0 top-4 block h-0.5 w-6 bg-neutral-900 transition"></span>
      </button>
    </div>

    <div id="mobileMenu" class="hidden md:hidden border-t border-neutral-200 bg-[var(--bg-section)]">
      <nav id="navMobile" class="px-4 py-4 space-y-2"></nav>
      <div class="px-4 pb-4">
        <a id="ctaMobile" href="#" class="mt-3 block rounded-xl bg-primary-100 px-4 py-2 text-center text-white font-semibold"></a>
      </div>
    </div>
  </header>

  <!-- ============= HERO ============= -->
  <section class="relative overflow-hidden py-20 md:py-28">
    <div aria-hidden class="pointer-events-none absolute inset-0 -z-10 opacity-15"
         style="background: radial-gradient(600px 300px at 15% 20%, var(--color-primary-100), transparent 70%);"></div>
    <div aria-hidden class="pointer-events-none absolute right-0 top-0 -z-10 h-[140%] w-[38%] translate-y-[-12%] opacity-25"
         style="background-image: repeating-linear-gradient(45deg,
           var(--color-primary-200) 0 14px,
           var(--color-neutral-600) 14px 28px,
           var(--color-neutral-100) 28px 42px); filter: blur(2px);"></div>

    <div class="mx-auto grid max-w-7xl grid-cols-1 items-center gap-12 px-4 md:grid-cols-2">
      <div>
        <div class="inline-flex items-center gap-2 rounded-full border border-neutral-200 bg-[var(--bg-muted)] px-3 py-1 text-xs text-neutral-600">
          <span class="inline-block h-2 w-2 rounded-full bg-primary-100"></span>
          <span>Barbería de autor</span>
        </div>

        <h1 class="mt-4 text-4xl font-extrabold leading-tight md:text-6xl">
          <span id="heroTitle"></span> <span id="heroHighlight" class="text-primary-100"></span>
        </h1>

        <p id="heroDesc" class="mt-6 max-w-xl text-lg text-neutral-600"></p>

        <div class="mt-8 flex flex-wrap items-center gap-4">
          <a id="heroCta1" href="#"
             class="rounded-2xl bg-primary-100 px-6 py-3 font-semibold text-white shadow-lg shadow-neutral-200/40 transition hover:opacity-90 focus:outline-none focus:ring-2 focus:ring-primary-200"></a>
          <a id="heroCta2" href="#"
             class="rounded-2xl border border-primary-200 px-6 py-3 font-semibold text-primary-600 transition hover:bg-neutral-50 focus:outline-none focus:ring-2 focus:ring-primary-200"></a>
        </div>

        <div id="heroBadges" class="mt-8 flex flex-wrap items-center gap-3 text-sm"></div>
      </div>

      <div class="relative md:max-w-[560px] md:ml-auto">
        <div class="absolute -inset-2 -z-10 rounded-[1.75rem]"
            style="background: linear-gradient(135deg, var(--color-primary-200), var(--color-neutral-300)); filter: blur(12px); opacity:.25;"></div>

        <div class="overflow-hidden rounded-3xl border border-neutral-200 bg-[var(--bg-card)] shadow-2xl aspect-[4/5] md:aspect-[4/3]">
          <img id="heroImg" src="" alt="" class="h-full w-full object-cover" loading="eager" />
        </div>

        <div class="absolute -left-4 -top-4 rounded-full border border-neutral-200 bg-[var(--bg-card)] px-3 py-1 text-xs font-semibold text-neutral-600 backdrop-blur">
          Since • 2015
        </div>
      </div>

    </div>
  </section>

  <!-- ============= SERVICIOS ============= -->
  <section id="productos" class="py-20 md:py-24">
    <div class="mx-auto max-w-7xl px-4">
      <div class="mb-10 flex items-end justify-between">
        <h2 class="text-3xl font-bold">Servicios</h2>
        <a href="#precios" class="text-sm text-neutral-500 hover:text-neutral-900">Ver tabla de precios →</a>
      </div>
      <div id="servicesGrid" class="grid gap-6 sm:grid-cols-2 lg:grid-cols-4"></div>
    </div>
  </section>

  <!-- ============= GALERÍA ============= -->
  <section id="galeria" class="relative border-y border-neutral-200 bg-[var(--bg-section)] py-20 md:py-24">
    <div aria-hidden class="pointer-events-none absolute inset-x-0 top-0 -z-10 h-20 opacity-20"
         style="background-image: repeating-linear-gradient(45deg,
           var(--color-primary-100) 0 12px,
           var(--color-neutral-600) 12px 24px,
           var(--color-neutral-100) 24px 36px);
           mask-image: linear-gradient(to bottom, black, transparent);
           -webkit-mask-image: linear-gradient(to bottom, black, transparent);"></div>

    <div class="mx-auto max-w-7xl px-4">
      <div class="mb-8 flex items-center justify-between">
        <h2 class="text-3xl font-bold">Galería</h2>
        <span class="hidden h-[3px] w-32 rounded-full bg-gradient-to-r from-primary-200 via-neutral-300 to-primary-200 md:inline-block"></span>
      </div>

      <section id="mosaic" class="py-6"></section>

      <section id="videos" class="mt-4 hidden">
        <h3 class="mb-3 text-base font-semibold">Videos</h3>
        <div id="videosGrid" class="grid gap-4 sm:grid-cols-2"></div>
      </section>
    </div>
  </section>

  <!-- Lightbox -->
  <dialog id="lightbox" class="lightbox">
    <button class="lb-close" aria-label="Cerrar">&times;</button>
    <button class="lb-btn lb-prev" aria-label="Anterior">&#10094;</button>
    <button class="lb-btn lb-next" aria-label="Siguiente">&#10095;</button>

    <div class="absolute left-4 top-4 z-50 flex gap-2 pointer-events-auto">
      <button id="zoomOut"  class="rounded-xl border border-white/25 bg-white/10 px-2 py-1 text-white hover:bg-white/20" aria-label="Alejar">−</button>
      <button id="zoomIn"   class="rounded-xl border border-white/25 bg-white/10 px-2 py-1 text-white hover:bg-white/20" aria-label="Acercar">+</button>
      <button id="zoomReset"class="rounded-xl border border-white/25 bg-white/10 px-2 py-1 text-white hover:bg-white/20" aria-label="Reiniciar">⟲</button>
    </div>

    <div class="grid h-full w-full place-items-center p-4">
      <div id="viewer" class="relative max-h-[90vh] max-w-[95vw] overflow-hidden rounded-xl">
        <img id="lightbox-img" src="" alt="" class="select-none object-contain" style="max-height:90vh;max-width:95vw;transform:translate(0px,0px) scale(1);" />
      </div>
    </div>

    <div class="absolute bottom-4 left-0 right-0 mx-auto w-[92vw] max-w-5xl rounded-lg bg-black/25 px-3 py-2 backdrop-blur">
      <div id="thumbs" class="thumbs flex gap-3 overflow-x-auto"></div>
    </div>
  </dialog>

  <!-- ============= PRECIOS (presentaciones) ============= -->
  <section id="precios" class="py-20 md:py-24">
    <div class="mx-auto max-w-7xl px-4">
      <h2 class="mb-10 text-3xl font-bold">Precios</h2>
      <div id="pricingGrid" class="grid gap-6 md:grid-cols-3"></div>
    </div>
  </section>

  <!-- ============= CONTACTO (sin formulario) ============= -->
  <section id="contacto" class="py-20 md:py-24">
    <div class="mx-auto max-w-7xl px-4">
      <!-- Heading -->
      <div class="mb-10">
        <p class="text-xs tracking-wider text-neutral-600 uppercase">Contacto</p>
        <h2 id="bookingHeading" class="mt-2 text-3xl font-bold"></h2>
        <p class="mt-2 max-w-2xl text-neutral-600">
          <span id="bookingIntroText"></span>
          <a id="bookingPhone" class="underline" href="#"></a>.
        </p>
      </div>

      <div class="grid gap-8 md:grid-cols-12">
        <!-- IZQUIERDA -->
        <div class="md:col-span-7 lg:col-span-8">
          <div class="grid gap-6 sm:grid-cols-2">
            <!-- Ubicación -->
            <div class="rounded-3xl border border-neutral-200 bg-[var(--bg-card)] p-6">
              <div class="flex items-start gap-3">
                <span class="inline-flex h-9 w-9 items-center justify-center rounded-xl border border-neutral-200 bg-neutral-50">
                  <!-- pin -->
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" class="opacity-80">
                    <path d="M12 22s7-6.31 7-12A7 7 0 1 0 5 10c0 5.69 7 12 7 12Z" stroke="currentColor" stroke-width="1.5"/>
                    <circle cx="12" cy="10" r="2.5" stroke="currentColor" stroke-width="1.5"/>
                  </svg>
                </span>
                <div class="min-w-0">
                  <h3 class="text-lg font-semibold">Ubicación</h3>
                  <p id="bookingAddress" class="mt-2 text-neutral-700"></p>
                  <a id="bookingMapUrl"
                    class="mt-3 inline-flex items-center gap-2 rounded-lg border border-neutral-200 px-3 py-2 text-sm hover:bg-neutral-50"
                    target="_blank" rel="noreferrer" href="#">
                    Abrir en Maps
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" class="opacity-80">
                      <path d="M7 17 17 7M9 7h8v8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                    </svg>
                  </a>
                </div>
              </div>
            </div>

            <!-- Contacto -->
            <div class="rounded-3xl border border-neutral-200 bg-[var(--bg-card)] p-6">
              <div class="flex items-start gap-3">
                <span class="inline-flex h-9 w-9 items-center justify-center rounded-xl border border-neutral-200 bg-neutral-50">
                  <!-- mail -->
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" class="opacity-80">
                    <path d="M4 6h16v12H4z" stroke="currentColor" stroke-width="1.5" />
                    <path d="m4 7 8 6 8-6" stroke="currentColor" stroke-width="1.5" />
                  </svg>
                </span>
                <div class="min-w-0">
                  <h3 class="text-lg font-semibold">Contacto</h3>
                  <ul id="contactLinks" class="mt-3 space-y-2 text-sm text-neutral-700"></ul>
                </div>
              </div>
            </div>

            <!-- Horarios (ocupa ancho completo) -->
            <div class="sm:col-span-2 rounded-3xl border border-neutral-200 bg-[var(--bg-card)] p-6">
              <div class="flex items-start gap-3">
                <span class="inline-flex h-9 w-9 items-center justify-center rounded-xl border border-neutral-200 bg-neutral-50">
                  <!-- clock -->
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" class="opacity-80">
                    <circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="1.5"/>
                    <path d="M12 7v5l3 2" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                  </svg>
                </span>
                <div class="min-w-0 flex-1">
                  <h3 class="text-lg font-semibold">Horarios</h3>
                  <ul id="bookingHours" class="mt-3 grid grid-cols-2 gap-2 text-sm text-neutral-700 md:grid-cols-3"></ul>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- DERECHA: imagen sticky -->
        <aside class="md:col-span-5 lg:col-span-4">
          <div class="sticky top-24">
            <figure class="overflow-hidden rounded-3xl border border-neutral-200 bg-[var(--bg-card)] shadow-sm aspect-[4/3]">
              <img id="bookingImage" src="" alt="" class="h-full w-full object-cover" />
            </figure>
            <figcaption class="mt-3 text-xs text-neutral-500">RGV Prime Foods — logística y distribución</figcaption>
          </div>
        </aside>
      </div>
    </div>
  </section>


  <!-- ============= FAQ ============= -->
  <section id="faq" class="border-t border-neutral-200 py-20 md:py-24">
    <div class="mx-auto max-w-7xl px-4">
      <h2 class="mb-8 text-3xl font-bold">Preguntas frecuentes</h2>
      <div id="faqGrid" class="grid gap-4 md:grid-cols-2"></div>
    </div>
  </section>

  <!-- ============= FOOTER ============= -->
  <footer class="border-t border-neutral-200">
    <div class="mx-auto max-w-7xl px-4 py-10 flex flex-col md:flex-row items-center justify-between gap-6">
      <div class="flex items-center gap-3 text-neutral-600">
        <span id="brandLogoFooter" class="shrink-0 inline-flex" aria-hidden="true"></span>
        <span>© <span id="footerYear"></span> <span id="footerBrand"></span></span>
      </div>
      <div id="footerSocial" class="flex items-center gap-4 text-sm text-neutral-600"></div>
    </div>
  </footer>












  <!-- ============= CONTENIDO ÚNICO ============= -->
  <script>
    const BARBER_CONTENT = {
      header: {
        brand: 'RGV Prime Foods',
        logo: {
          kind: 'img',
          width: 36,
          height: 36,
          img: { src: './img/logo.png', alt: 'RGV Prime Foods' },
        },
        nav: [
          { url: '#productos',        title: 'Productos' },
          { url: '#galeria', title: 'Galería' },
          { url: '#precios', title: 'Precios' },
          { url: '#contacto',         title: 'Contacto' },
          { url: '#faq',              title: 'FAQ' },
        ],
        cta: { url: '#contacto', title: 'Contactar ventas' },
      },

      hero: {
        title: 'Beef barbacoa y pork carnitas',
        highlight: 'Totalmente cocinadas',
        description:
          'Traditional Mexican-style beef barbacoa y pork carnitas, cocinadas a fuego lento para máximo sabor y suavidad. Solo calienta y sirve.',
        image: {
          src: './img/carne.jpg',
          alt: 'Cajas de producto RGV Prime Foods con beef barbacoa y pork carnitas',
        },
        ctaPrimary:   { url: '#contacto',         title: 'Solicitar información' },
        ctaSecondary: { url: '#especificaciones', title: 'Ver especificaciones' },
        badges: [
          'Traditional Mexican-style · fully cooked',
          'Fresh shelf life: 45 days',
          'Frozen shelf life: 1 year',
          'USDA inspected · EST. 3243',
        ],
      },

      /* Catálogo breve (usamos "services") */
      services: [
        {
          title: 'Beef Barbacoa',
          desc: 'Traditional Mexican-style beef barbacoa, fully slow-cooked to perfection.',
          price: 'Cotizar',
          img: { src: './img/beef_carnitas.png', alt: 'Caja de beef barbacoa RGV Prime Foods' },
        },
        {
          title: 'Fully Cooked Pork Carnitas',
          desc: 'Pork carnitas slow-cooked; juicy and tender. Just heat and enjoy.',
          price: 'Cotizar',
          img: { src: './img/pork_carnitas.png', alt: 'Caja de pork carnitas RGV Prime Foods' },
        },
      ],

      gallery: {
        heading: 'Galería de producto',
        images: [
          { src: './img/carne.jpg',  alt: 'Beef barbacoa empacada al vacío en caja' },
          { src: './img/carne2.jpg', alt: 'Caja cerrada de beef barbacoa RGV Prime Foods' },
        ],
        videos: [],
      },

      pricing: {
        heading: 'Presentaciones y empaque',
        cta: { url: '#contacto', title: 'Cotizar con ventas' },
        plans: [
          {
            name: 'Beef Barbacoa',
            price: 'Cotizar',
            features: [
              'Peso neto por unidad: ~5–7 lb',
              'Peso por caja: ~10–12.5 lb',
              'Dimensiones de caja: L 18" x W 12" x H 4"',
              '90 cajas por pallet · 9 cajas por capa',
              'Fresh shelf life: 45 days · Frozen shelf life: 1 year',
            ],
          },
          {
            name: 'Fully Cooked Pork Carnitas',
            price: 'Cotizar',
            highlight: true,
            features: [
              'Peso neto por unidad: ~5–7 lb',
              'Peso por caja: ~10–12.5 lb',
              'Dimensiones de caja: L 18" x W 12" x H 4"',
              '90 cajas por pallet · 9 cajas por capa',
              'Fresh shelf life: 45 days · Frozen shelf life: 1 year',
            ],
          },
        ],
      },

      /* Contacto (sin formulario) */
      booking: {
        heading: 'Contacto y distribución',
        intro: 'Para cotizaciones y distribución, escríbenos o síguenos en redes:',
        phone: 'ean@wfnfoods.com', /* se usa para el enlace corto debajo del h2 */
        image: { src: '/img/rgv-boxes.jpg', alt: 'Cajas de RGV Prime Foods listas para envío' },
        hours: [
          'Mantener refrigerado',
          'Fresh shelf life: 45 days',
          'Frozen shelf life: 1 year',
        ],
        address: 'South Texas, U.S.A.',
        mapUrl: '#',
        note: 'USDA · EST. 3243',
        contacts: {
          emails: ['ean@wfnfoods.com','m.garza@wfnfoods.com'],
          socials: [
            { title:'Instagram', url:'#instagram' },
            { title:'LinkedIn',  url:'#linkedin'  },
          ],
        },
      },

      faq: {
        heading: 'Preguntas frecuentes',
        items: [
          { q:'¿El producto llega completamente cocido?', a:'Sí, ambos productos llegan totalmente cocidos.' },
          { q:'¿Cómo se debe almacenar?', a:'Mantener refrigerado y respetar las fechas del empaque.' },
          { q:'¿Cuál es la vida de anaquel?', a:'45 días fresco · 1 año congelado.' },
          { q:'¿Cuenta con inspección del USDA?', a:'Sí, U.S. INSPECTED AND PASSED · EST. 3243.' },
        ],
      },

      footer: {
        year: new Date().getFullYear(),
        brand: 'RGV Prime Foods',
        social: [
          { url: 'mailto:ean@wfnfoods.com',     title: 'ean@wfnfoods.com' },
          { url: 'mailto:m.garza@wfnfoods.com', title: 'm.garza@wfnfoods.com' },
        ],
      },
    };
  </script>

  <!-- ============= RENDER ÚNICO ============= -->
  <script>
    (function(){
      const $ = (s)=>document.querySelector(s);
      const setText=(s,v)=>{const el=$(s); if(el) el.textContent=v};
      const setAttr=(s,a,v)=>{const el=$(s); if(el && v!=null) el.setAttribute(a,v)};
      const setLink=(s,obj)=>{const el=$(s); if(el && obj){ el.href=obj.url; el.textContent=obj.title; }};
      const renderInto=(sel,arr,factory)=>{const el=$(sel); if(!el) return; el.innerHTML=''; (arr||[]).forEach((it,i)=>el.appendChild(factory(it,i)));};

      function injectLogo(selector, logo, brand, size){
        const wrap = $(selector); if(!wrap) return;
        wrap.innerHTML = '';
        const w = size ?? logo?.width ?? 36;
        const h = size ?? logo?.height ?? 36;
        if (logo?.kind === 'svg' && logo.svg){
          wrap.innerHTML = logo.svg.trim();
          const svg = wrap.querySelector('svg');
          if (svg){ svg.setAttribute('width', String(w)); svg.setAttribute('height', String(h)); }
        } else if (logo?.kind === 'img' && logo.img?.src){
          const img=document.createElement('img');
          img.src=logo.img.src; img.alt=logo.img.alt ?? brand ?? '';
          img.width=w; img.height=h; img.className='block';
          wrap.appendChild(img);
        }
      }

      function renderHeader(c){
        injectLogo('#brandLogoHeader', c.logo, c.brand, 36);
        setText('#brandName', c.brand);
        setLink('#ctaDesktop', c.cta);
        setLink('#ctaMobile',  c.cta);

        const mk=(mobile)=>l=>{
          const a=document.createElement('a');
          a.href=l.url; a.textContent=l.title;
          a.className = mobile
            ? 'block rounded-lg px-3 py-2 text-neutral-700 hover:bg-neutral-100'
            : 'text-neutral-600 hover:text-neutral-900 text-sm';
          return a;
        };
        renderInto('#navDesktop', c.nav, mk(false));
        renderInto('#navMobile',  c.nav, mk(true));
      }

      function renderHero(h){
        setText('#heroTitle', h.title);
        setText('#heroHighlight', h.highlight);
        setText('#heroDesc', h.description);
        setAttr('#heroImg','src',h.image?.src);
        setAttr('#heroImg','alt',h.image?.alt||'');
        setLink('#heroCta1', h.ctaPrimary);
        setLink('#heroCta2', h.ctaSecondary);
        const wrap = document.getElementById('heroBadges');
        if(wrap){
          wrap.innerHTML='';
          (h.badges||[]).forEach(t=>{
            const s=document.createElement('span');
            s.className='rounded-full border border-neutral-200 bg-[var(--bg-muted)] px-3 py-1 text-neutral-600';
            s.textContent=t; wrap.appendChild(s);
          });
        }
      }

      function renderServices(items){
        renderInto('#servicesGrid', items, (s)=>{
          const card=document.createElement('article');
          card.className='group overflow-hidden rounded-3xl border border-neutral-200 bg-[var(--bg-card)] transition hover:-translate-y-1 hover:shadow-xl';
          card.innerHTML=`
            <div class="relative aspect-video overflow-hidden">
              <img src="${s.img?.src}" alt="${s.img?.alt||s.title}" class="h-full w-full object-cover transition duration-500 group-hover:scale-105"/>
              ${s.price?`<span class="absolute left-3 top-3 rounded-full bg-primary-100 px-3 py-1 text-xs font-bold text-white shadow">${s.price}</span>`:''}
            </div>
            <div class="space-y-2 p-5">
              <div class="flex items-start justify-between gap-3">
                <h3 class="text-xl font-semibold">${s.title}</h3>
                ${s.price?`<span class="hidden rounded-full border border-primary-200 px-2 py-0.5 text-xs font-semibold text-primary-600 md:inline">${s.price}</span>`:''}
              </div>
              <p class="text-sm text-neutral-600">${s.desc||''}</p>
            </div>
            <div aria-hidden class="h-1 opacity-70" style="background:linear-gradient(90deg,var(--color-primary-400),var(--color-neutral-300),var(--color-primary-700))"></div>
          `;
          return card;
        });
      }

      function renderGallery(g){
        const container = document.getElementById('mosaic');
        if(!container) return;
        const images = g.images||[];
        const maxVisible=4, visible=images.slice(0,maxVisible), extraCount=Math.max(0,images.length-maxVisible);
        const grid=document.createElement('div');
        grid.className="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4 auto-rows-[150px]";

        visible.forEach((img,idx)=>{
          const btn=document.createElement('button');
          btn.className=['group relative cursor-pointer overflow-hidden rounded-2xl','border border-neutral-200 bg-white shadow-sm','transition-all duration-500 hover:-translate-y-0.5 hover:shadow-lg focus:outline-none','focus-visible:ring-2 focus-visible:ring-primary-200'].join(' ');
          if(idx===0){ btn.style.gridRowEnd='span 2'; btn.style.gridColumnEnd='span 2'; }
          btn.setAttribute('aria-label',`Ver imagen ${idx+1}`);
          btn.addEventListener('click',()=>openLightbox(idx));
          btn.innerHTML=`
            <div class="relative w-full h-full">
              <img src="${img.src}" alt="${img.alt||`Imagen ${idx+1}`}" class="absolute inset-0 h-full w-full object-cover transition-transform duration-500 group-hover:scale-[1.03]"/>
              <div class="pointer-events-none absolute inset-0 bg-gradient-to-t from-black/15 via-black/5 to-transparent opacity-0 transition-opacity duration-300 group-hover:opacity-100"></div>
              <span class="pointer-events-none absolute inset-x-3 bottom-3 rounded-lg bg-primary-100/95 px-2 py-1 text-[11px] font-semibold text-white shadow-sm ring-1 ring-white/10 opacity-0 transition-all duration-300 group-hover:opacity-100">Ver foto</span>
            </div>`;
          grid.appendChild(btn);
        });

        if(extraCount>0){
          const btnAll=document.createElement('button');
          btnAll.className=['relative cursor-pointer overflow-hidden rounded-2xl','border border-neutral-200 bg-white shadow-sm','transition-all hover:-translate-y-0.5 hover:shadow-lg focus:outline-none','focus-visible:ring-2 focus-visible:ring-primary-200','flex items-center justify-center'].join(' ');
          btnAll.setAttribute('aria-label','Ver todas las fotos');
          btnAll.addEventListener('click',()=>openLightbox(maxVisible));
          btnAll.innerHTML=`<div class="absolute inset-0 bg-neutral-50 opacity-0 transition-opacity duration-300 hover:opacity-100"></div><span class="text-base font-semibold text-neutral-900">+${extraCount} fotos</span>`;
          grid.appendChild(btnAll);
        }

        container.innerHTML='';
        container.appendChild(grid);
        window.__GALLERY_ITEMS = images.map(i=>({src:i.src, alt:i.alt||''}));
      }

      function initLightbox(){
        const dialog = document.getElementById('lightbox');
        const imgEl  = document.getElementById('lightbox-img');
        const viewer = document.getElementById('viewer');
        const btnClose = dialog.querySelector('.lb-close');
        const btnPrev  = dialog.querySelector('.lb-prev');
        const btnNext  = dialog.querySelector('.lb-next');
        const thumbsEl = document.getElementById('thumbs');
        const zoomInBtn = document.getElementById('zoomIn');
        const zoomOutBtn = document.getElementById('zoomOut');
        const zoomResetBtn = document.getElementById('zoomReset');

        let items = window.__GALLERY_ITEMS || [];
        let idx=0, scale=1, tx=0, ty=0, dragging=false, sx=0, sy=0, stx=0, sty=0;

        function apply(){ imgEl.style.transform=`translate(${tx}px, ${ty}px) scale(${scale})`; }
        function setImage(i){
          idx=i; const it=items[idx]; if(!it) return;
          imgEl.src=it.src; imgEl.alt=it.alt||''; scale=1; tx=0; ty=0; apply();
          highlightThumb(); ensureThumbInView();
          btnPrev.style.display=(idx>0)?'block':'none';
          btnNext.style.display=(idx<items.length-1)?'block':'none';
        }
        window.openLightbox = (i)=>{ setImage(i||0); dialog.showModal(); document.body.style.overflow='hidden'; };
        function close(){ dialog.close(); document.body.style.overflow=''; }
        function prev(){ if(idx>0) setImage(idx-1); }
        function next(){ if(idx<items.length-1) setImage(idx+1); }

        function renderThumbs(){
          thumbsEl.innerHTML='';
          items.forEach((it,i)=>{
            const b=document.createElement('button');
            b.className="relative h-12 w-20 flex-shrink-0 overflow-hidden rounded-md";
            b.addEventListener('click',()=>setImage(i));
            b.innerHTML=`<img src="${it.src}" alt="${it.alt||`Miniatura ${i+1}`}" class="absolute inset-0 h-full w-full object-cover"/>`;
            thumbsEl.appendChild(b);
          });
        }
        function highlightThumb(){
          [...thumbsEl.children].forEach((el,i)=>{
            el.classList.toggle('ring-2',i===idx);
            el.classList.toggle('ring-white',i===idx);
            el.classList.toggle('scale-110',i===idx);
            el.style.opacity=i===idx?'1':'.7';
          });
        }
        function ensureThumbInView(){
          const c=thumbsEl; const el=c.children[idx]; if(!el) return;
          const target = el.offsetLeft - (c.clientWidth - el.offsetWidth)/2;
          const max = Math.max(0, c.scrollWidth - c.clientWidth);
          c.scrollTo({left:Math.min(Math.max(target,0),max),behavior:'smooth'});
        }

        function onDown(e){ if(scale===1) return; dragging=true; const p=e.touches?e.touches[0]:e; sx=p.clientX; sy=p.clientY; stx=tx; sty=ty; }
        function onMove(e){ if(!dragging) return; const p=e.touches?e.touches[0]:e; tx=stx+(p.clientX-sx); ty=sty+(p.clientY-sy); apply(); }
        function onUp(){ dragging=false; }

        viewer.addEventListener('mousedown',onDown);
        viewer.addEventListener('mousemove',onMove);
        window.addEventListener('mouseup',onUp);
        viewer.addEventListener('touchstart',onDown,{passive:true});
        viewer.addEventListener('touchmove',onMove,{passive:true});
        viewer.addEventListener('touchend',onUp);

        zoomInBtn.addEventListener('click',()=>{ scale=Math.min(scale+0.2,4); apply(); });
        zoomOutBtn.addEventListener('click',()=>{ scale=Math.max(scale-0.2,1); if(scale===1){tx=0;ty=0;} apply(); });
        zoomResetBtn.addEventListener('click',()=>{ scale=1; tx=0; ty=0; apply(); });

        btnClose.addEventListener('click',close);
        btnPrev.addEventListener('click',(e)=>{e.stopPropagation(); prev();});
        btnNext.addEventListener('click',(e)=>{e.stopPropagation(); next();});
        dialog.addEventListener('click',(e)=>{ if(e.target===dialog) close(); });
        window.addEventListener('keydown',(e)=>{ if(!dialog.open) return; if(e.key==='Escape') close(); if(e.key==='ArrowLeft') prev(); if(e.key==='ArrowRight') next(); });

        renderThumbs();
      }

      function renderPricing(p){
        renderInto('#pricingGrid', p.plans, (plan)=>{
          const highlight=!!plan.highlight;
          const card=document.createElement('div');
          card.className=`relative rounded-3xl border border-neutral-200 p-6 ${highlight?'bg-primary-100 text-white shadow-2xl':'bg-[var(--bg-card)]'}`;
          card.innerHTML=`
            ${highlight?'<span class="absolute -top-3 right-4 rounded-full bg-neutral-900 px-3 py-1 text-xs font-bold uppercase tracking-wide text-white">Más popular</span>':''}
            <h3 class="text-2xl font-bold">${plan.name}</h3>
            <p class="mt-2 text-4xl font-extrabold">${plan.price}</p>
            <ul class="mt-6 space-y-2 text-sm ${highlight?'text-white/90':'text-neutral-600'}">
              ${(plan.features||[]).map(f=>`<li class="flex items-start gap-2"><span class="mt-1 inline-block h-1.5 w-1.5 rounded-full ${highlight?'bg-white/70':'bg-neutral-400'}"></span>${f}</li>`).join('')}
            </ul>
            <a href="${p.cta?.url||'#'}" class="mt-6 inline-block w-full rounded-xl px-4 py-2 text-center font-semibold transition ${highlight?'bg-neutral-900 text-white hover:opacity-90':'bg-primary-100 text-white hover:opacity-90'}">
              ${(p.cta&&p.cta.title)||'Reservar'}
            </a>`;
          return card;
        });
      }

      /* NUEVO: contacto sin formulario */
      function renderBooking(b){
        setText('#bookingHeading', b.heading);
        setText('#bookingIntroText', b.intro + ' ');

        const firstEmail = (b.contacts && b.contacts.emails && b.contacts.emails[0]) || b.phone || '';
        const introLink = document.getElementById('bookingPhone');
        if (introLink && firstEmail){
          introLink.textContent = firstEmail;
          introLink.href = `mailto:${firstEmail}`;
        }

        setAttr('#bookingImage','src',b.image?.src);
        setAttr('#bookingImage','alt',b.image?.alt||'Imagen');

        const hoursEl=document.getElementById('bookingHours');
        if(hoursEl){ hoursEl.innerHTML=''; (b.hours||[]).forEach(h=>{ const li=document.createElement('li'); li.textContent=h; hoursEl.appendChild(li); }); }

        setText('#bookingAddress', b.address);
        const map=document.getElementById('bookingMapUrl'); if(map) map.href=b.mapUrl || '#';

        const contactsUl = document.getElementById('contactLinks');
        if (contactsUl) {
          contactsUl.innerHTML = '';

          (b.contacts?.emails || []).forEach(email=>{
            const li=document.createElement('li');
            li.innerHTML = `<a class="underline hover:text-neutral-900" href="mailto:${email}">${email}</a>`;
            contactsUl.appendChild(li);
          });

          (b.contacts?.socials || []).forEach(s=>{
            const li=document.createElement('li');
            li.innerHTML = `<a class="underline hover:text-neutral-900" href="${s.url}" target="_blank" rel="noreferrer">${s.title}</a>`;
            contactsUl.appendChild(li);
          });
        }
      }

      function renderFaq(f){
        const grid=document.getElementById('faqGrid'); if(!grid) return;
        grid.innerHTML='';
        (f.items||[]).forEach(item=>{
          const det=document.createElement('details');
          det.className='group rounded-2xl border border-neutral-200 bg-[var(--bg-card)] p-5 open:bg-neutral-50';
          det.innerHTML=`<summary class="cursor-pointer select-none text-base font-semibold">${item.q}</summary><p class="mt-2 text-sm text-neutral-600">${item.a}</p>`;
          grid.appendChild(det);
        });
      }

      function renderFooter(ft, logo, brand){
        injectLogo('#brandLogoFooter', logo, brand, 28);
        setText('#footerYear', ft.year);
        setText('#footerBrand', ft.brand);
        const wrap=document.getElementById('footerSocial'); if(!wrap) return;
        wrap.innerHTML=''; (ft.social||[]).forEach(l=>{ const a=document.createElement('a'); a.href=l.url; a.textContent=l.title; a.className='hover:text-neutral-900'; wrap.appendChild(a); });
      }

      function initHeaderToggle(){
        const btn=document.getElementById('menuBtn'), mm=document.getElementById('mobileMenu'), b1=document.getElementById('b1'), b2=document.getElementById('b2'), b3=document.getElementById('b3');
        if(!btn||!mm) return;
        const applyOpen=(open)=>{ mm.classList.toggle('hidden', !open); b1.classList.toggle('translate-y-2', open); b1.classList.toggle('rotate-45', open); b2.classList.toggle('opacity-0', open); b3.classList.toggle('-translate-y-2', open); b3.classList.toggle('-rotate-45', open); };
        let isOpen=false;
        btn.addEventListener('click',()=>{ isOpen=!isOpen; applyOpen(isOpen); });
        document.addEventListener('click',(e)=>{ if(!isOpen) return; const within=e.target.closest('#mobileMenu, #menuBtn'); if(!within){ isOpen=false; applyOpen(false);} });
      }

      function renderAll(C){
        renderHeader(C.header);
        renderHero(C.hero);
        renderServices(C.services);
        renderGallery(C.gallery);
        initLightbox();
        renderPricing(C.pricing);
        renderBooking(C.booking);      /* <- sin form */
        renderFaq(C.faq);
        renderFooter(C.footer, C.header.logo, C.header.brand);
        initHeaderToggle();
      }

      function start(){
        let tries=0;
        (function tick(){
          try{ renderAll(BARBER_CONTENT); }catch(e){}
          if($('#heroTitle')?.textContent && $('#servicesGrid')?.children.length){ return; }
          if(++tries>10) return;
          setTimeout(tick, 80);
        })();
      }

      if(document.readyState!=='loading') start();
      else document.addEventListener('DOMContentLoaded', start, { once:true });
    })();
  </script>
</body>
</html>
